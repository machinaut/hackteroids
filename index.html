<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <head>
    <title>HACKTEROIDS!</title>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        var ge;
        google.load("earth", "1", {"other_params":"sensor=true"});

        function init() {
            google.earth.createInstance('map3d', initCB, failureCB);
        }

        function initCB(instance) {
            ge = instance;

            // Make and draw a circle "polygon"
            var polygonPlacemark = ge.createPlacemark('');
            polygonPlacemark.setGeometry(ge.createPolygon(''));
            var outer = ge.createLinearRing('');
            polygonPlacemark.getGeometry().setOuterBoundary(makeCircle(.65, 0, 0));
            ge.getFeatures().appendChild(polygonPlacemark);

            // Draw and show the earth
            ge.getWindow().setVisibility(true);
        }

        function failureCB(errorCode) {
        }

        // Draw a circle on the map
        function makeCircle(radius, x, y) {
            var center = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
            var ring = ge.createLinearRing('');
            var steps = 25;
            var pi2 = Math.PI * 2;
            for (var i = 0; i < steps; i++) {
                var lat = center.getLatitude() + x + radius * Math.cos(i / steps * pi2);
                var lng = center.getLongitude() + y + radius *
                Math.sin(i / steps * pi2);
                ring.getCoordinates().pushLatLngAlt(lat, lng, 0);
            }
            return ring;
        }

        // Start the show!
        google.setOnLoadCallback(init);
    </script>
  </head>
  <body onload='init()' onunload="GUnload()" id='body'>
      <h1>Hackteroids!</h1>
      <div id='map3d'></div>
  </body>
</html>
